<cs-list
  (onAction)="showVmCreationDialog()"
  [isOpen]="listService?.hasSelected()"
>
  <ng-container cs-panels>
    <cs-top-bar>
      <cs-vm-statistics></cs-vm-statistics>
    </cs-top-bar>
    <cs-filter
      (onModeChange)="changeMode($event)"
    >
      <cs-vm-filter *ngIf="zones && groups  && accounts"
        [zones]="zones"
        [groups]="groups"
        [accounts]="accounts"
        [availableGroupings]="groupings"
        (updateFilters)="updateFiltersAndFilter($event)"
      ></cs-vm-filter>
    </cs-filter>
    <div class="top-border"></div>
  </ng-container>

  <ng-container *loading="fetching" cs-list>
    <cs-grouped-list *ngIf="mode == 0"
      [list]="visibleVmList"
      [groupings]="selectedGroupings"
      [component]="VmListRowItemComponent"
      [dynamicInputs]="inputs"
      [dynamicOutputs]="outputs"
    >
    </cs-grouped-list>
    <cs-grouped-card *ngIf="mode == 1"
      [list]="visibleVmList"
      [groupings]="selectedGroupings"
      [component]="VmListCardItemComponent"
      [dynamicInputs]="inputs"
      [dynamicOutputs]="outputs"
    >
    </cs-grouped-card>
    <cs-no-results *ngIf="noFilteringResults"></cs-no-results>
  </ng-container>
  <ng-container cs-sidebar>
    <cs-sidebar [isOpen]="listService?.hasSelected()">
      <router-outlet></router-outlet>
    </cs-sidebar>
  </ng-container>
</cs-list>
