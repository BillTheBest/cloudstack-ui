<cs-overlay-loading [active]="loading"></cs-overlay-loading>
<div [hidden]="loading">
  <h3 class="mat-dialog-title">{{ modeTranslationToken | translate }}</h3>
  <form (ngSubmit)="onCreate()" #templateCreationForm="ngForm" novalidate>
    <div class="mat-dialog-content">
      <div [class.flex-dialog-content]="!snapshot">
        <div [class.column]="!snapshot">
          <mat-form-field class="full-width-input">
            <input
              matInput
              name="name"
              [(ngModel)]="name"
              [placeholder]="'TEMPLATE_PAGE.TEMPLATE_CREATION.NAME' | translate"
              autofocus
              maxlength="255"
              required
            >
            <mat-hint align="end">
              <cs-character-count [value]="name" [maxLength]="255"></cs-character-count>
            </mat-hint>
          </mat-form-field>
          <br>
          <mat-form-field class="full-width-input">
            <input
              matInput
              name="description"
              [(ngModel)]="displayText"
              [placeholder]="'TEMPLATE_PAGE.TEMPLATE_CREATION.DESCRIPTION' | translate"
              maxlength="255"
              required
            >
            <mat-hint align="end">
              <cs-character-count
                [value]="displayText"
                [maxLength]="255"
              ></cs-character-count>
            </mat-hint>
          </mat-form-field>
          <br>
          <mat-form-field *ngIf="!snapshot" class="full-width-input">
            <input
              matInput
              type="url"
              name="url"
              [(ngModel)]="url"
              [placeholder]=" 'TEMPLATE_PAGE.TEMPLATE_CREATION.URL' | translate "
              pattern="^(http|https):\/\/.*$"
              maxlength="255"
              required
              #urlField="ngModel"
            >
            <mat-error
              *ngIf="urlField.hasError('pattern')"
            >
              {{ 'TEMPLATE_PAGE.TEMPLATE_CREATION.INVALID_URL' | translate }}
            </mat-error>
            <mat-hint align="end">
              <cs-character-count [value]="url" [maxLength]="255"></cs-character-count>
            </mat-hint>
          </mat-form-field>
        </div>
        <div [class.column]="!snapshot">
          <div>
            <mat-select
              class="form-select-control"
              [placeholder]="'TEMPLATE_PAGE.TEMPLATE_CREATION.OS_TYPE' | translate"
              [(ngModel)]="osTypeId"
              id="osType"
              name="osType"
            >
              <mat-option
                *ngFor="let osType of osTypes"
                [value]="osType.id"
              >
                {{ osType.description }}
              </mat-option>
            </mat-select>
          </div>
          <div *ngIf="!snapshot">
            <mat-select
              class="form-select-control"
              [placeholder]="'TEMPLATE_PAGE.TEMPLATE_CREATION.ZONE' | translate"
              [(ngModel)]="zoneId"
              id="serviceOffering"
              name="serviceOffering"
            >
              <mat-option
                *ngFor="let zone of zones"
                [value]="zone.id"
              >
                {{ zone.name }}
              </mat-option>
            </mat-select>
          </div>
          <div>
            <mat-checkbox
              *ngIf="mode === 'Template'"
              name="pass"
              [(ngModel)]="passwordEnabled"
            >
              {{ 'TEMPLATE_PAGE.TEMPLATE_CREATION.PASSWORD_ENABLED' | translate }}
            </mat-checkbox>
            <mat-checkbox
              class="dynscal-checkbox"
              name="dynscal"
              [(ngModel)]="dynamicallyScalable"
              *ngIf="mode === 'Template'"
            >
              {{ 'TEMPLATE_PAGE.TEMPLATE_CREATION.DYNAMICALLY_SCALABLE' | translate }}
            </mat-checkbox>
          </div>
        </div>
      </div>
    </div>
    <div class="mat-dialog-actions">
      <button
        mat-button
        color="primary"
        matDialogClose
        type="button"
      >
        {{ 'COMMON.CANCEL' | translate }}
      </button>
      <button
        mat-button
        color="primary"
        type="submit"
        [disabled]="!templateCreationForm.valid"
      >
        {{ 'COMMON.CREATE' | translate }}
      </button>
    </div>
  </form>
</div>
